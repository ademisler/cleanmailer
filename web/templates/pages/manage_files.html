{% extends 'layouts/base.html' %}
{% block content %}
<h3 class="mb-4">Manage Files</h3>
<div class="row">
  <div class="col-lg-6 mb-4">
    <div class="card h-100">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Receivers.xlsx</span>
        <div>
          {% if path_exists['receivers'] %}
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('download_file','receivers') }}"><i class="bi bi-download"></i></a>
          <form action="{{ url_for('delete_file','receivers') }}" method="post" class="d-inline">
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
          </form>
          {% endif %}
        </div>
      </div>
      <div class="card-body">
        <div class="alert alert-info small">
          <strong>Expected columns:</strong> email<br>
          <div class="mt-2"><pre class="mb-0">email
john@example.com
jane@example.com</pre></div>
        </div>
        <form action="{{ url_for('upload_file','receivers') }}" method="post" enctype="multipart/form-data" class="mb-3">
          <div class="input-group">
            <input class="form-control" type="file" name="file" required>
            <button class="btn btn-primary" type="submit"><i class="bi bi-upload"></i></button>
          </div>
          <a href="{{ url_for('download_receivers_example') }}" class="small">Download example</a>
        </form>
        <form action="{{ url_for('add_receiver') }}" method="post" class="row g-2">
          <div class="col">
            <input type="email" name="email" class="form-control" placeholder="email" required>
          </div>
          <div class="col">
            <input type="text" name="campaign_id" class="form-control" placeholder="campaign (optional)">
          </div>
          <div class="col-auto">
            <button class="btn btn-success" type="submit">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-6 mb-4">
    <div class="card h-100">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Senders.xlsx</span>
        <div>
          {% if path_exists['senders'] %}
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('download_file','senders') }}"><i class="bi bi-download"></i></a>
          <form action="{{ url_for('delete_file','senders') }}" method="post" class="d-inline">
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
          </form>
          {% endif %}
        </div>
      </div>
      <div class="card-body">
        <div class="alert alert-info small">
          <strong>Expected columns:</strong> Mail, Mdp, IMAP Host, IMAP Port, SMTP Host, SMTP Port, Nom, Günlük Limit
          <div class="mt-2"><pre class="mb-0">Mail,Mdp,IMAP Host,IMAP Port,SMTP Host,SMTP Port,Nom,Günlük Limit
liora@example.com,password123,imap.example.com,993,smtp.example.com,465,Liora,75</pre></div>
        </div>
        <form action="{{ url_for('upload_file','senders') }}" method="post" enctype="multipart/form-data" class="mb-3">
          <div class="input-group">
            <input class="form-control" type="file" name="file" required>
            <button class="btn btn-primary" type="submit"><i class="bi bi-upload"></i></button>
          </div>
          <a href="{{ url_for('download_senders_example') }}" class="small">Download example</a>
        </form>
        <form action="{{ url_for('add_sender') }}" method="post" class="row g-2">
          <div class="col-6">
            <input type="text" name="Mail" class="form-control" placeholder="Mail" required>
          </div>
          <div class="col-6">
            <input type="password" name="Mdp" class="form-control" placeholder="Mdp" required>
          </div>
          <div class="col-md-6">
            <input type="text" name="IMAP Host" class="form-control" placeholder="IMAP Host" required>
          </div>
          <div class="col-md-6">
            <input type="number" name="IMAP Port" class="form-control" placeholder="IMAP Port" required>
          </div>
          <div class="col-md-6">
            <input type="text" name="SMTP Host" class="form-control" placeholder="SMTP Host" required>
          </div>
          <div class="col-md-6">
            <input type="number" name="SMTP Port" class="form-control" placeholder="SMTP Port" required>
          </div>
          <div class="col-md-6">
            <input type="text" name="Nom" class="form-control" placeholder="Nom" required>
          </div>
          <div class="col-md-6">
            <input type="number" name="Günlük Limit" class="form-control" placeholder="Günlük Limit" required>
          </div>
          <div class="col-12">
            <button class="btn btn-success" type="submit">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
